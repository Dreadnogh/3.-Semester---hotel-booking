<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js" integrity="sha512-u9akINsQsAkG9xjc1cnGF4zw5TFDwkxuc9vUp5dltDWYCSmyd0meygbvgXrlc/z7/o4a19Fb5V0OUE58J7dcyw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

@using PrimeStay.MVC.Model
@model Hotel;

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
</head>
<body>
    @{
        ViewData["Title"] = "Choose room";
    }
    <div class="container" style="padding-top: 30px; padding-bottom: 30px;">
        <div class="card mb-3" style="max-width: 100%;">
            <div class="row g-0">
                <div class="col-md-4" style=" display: flex; justify-content: center; align-items: center; overflow: hidden; object-fit: cover; ">
                    <img src="~/img/hotel-presidente.jpg" id="Hotel" class=" rounded-start" alt="..." style="min-width: 100%; min-height: 100%; width: auto; height: auto; object-fit: cover; ">
                </div>
                <div class="col-md-8">
                    <div class="card-body ">
                        <h5 class="card-title">@Model.Name</h5>
                        <p class=" card-text"> @Model.Location.Country </p>
                        <p class="card-text">@Model.Description</p>
                        <p class="card-text">Stars: @Model.Stars</p>
                        <p class="card-text">Staffed hours: @Model.Staffed_hours</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            var href = "api/picture/hotel/" + @Model.Id;
            var uri = "https://localhost:44312/";
            axios.get(uri + href)
            .then(result => {
                $('#Hotel').attr("src", result.data[0].path);
            }).catch(err => {
            console.log(err);
            })
        })
    </script>

    @foreach (Room room in Model.rooms)
    {
        <div class="container" style="padding-top: 30px; padding-bottom: 30px;">
            <div class="card mb-3" style="max-width: 100%;">
                <div class="row g-0">
                    <div class="col-md-4" style=" display: flex; justify-content: center; align-items: center; overflow: hidden; object-fit: cover; ">
                        <img src="~/img/hotel-room.jpg" id="@room.Id" class=" rounded-start" alt="..." style="min-width: 100%; min-height: 100%; width: auto; height: auto; object-fit: cover; ">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body ">
                            <h5 class="card-title">@room.Type</h5>

                            <p class="card-text">@room.Description</p>

                            <div class="form-group float-right">
                                <span class="form-label" style="padding-bottom:10px;">Price: KOMMER SNART kr/night</span>
                                <br />
                                <a asp-controller="Booking" asp-action="Info" asp-route-href="@room.Href"> <input class="btn btn-primary " type="button" name="order" value="Choose" style="width:150px;" /></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <script>
        $(document).ready(function () {
           var href = "api/picture/room/" + @room.Id;
           var uri = "https://localhost:44312/";
           console.log(uri + href)
           axios.get(uri + href)
           .then(result => {
                console.log("i am fetching", result.data)
               $('#@room.Id').attr("src", result.data[0].path);

           }).catch(err => {
               console.log(err);
           })
        })
        </script>
        </div>

    }

</body>
</html>
